/*!
 * tablesort v4.1.0 (2016-11-28)
 * http://tristen.ca/tablesort/demo/
 * Copyright (c) 2016 ; Licensed MIT
*/!function(){function a(b,c){if(!(this instanceof a))return new a(b,c);if(!b||"TABLE"!==b.tagName)throw new Error("Element must be a table");this.init(b,c||{})}var b=[],c=function(a){var b;return window.CustomEvent&&"function"==typeof window.CustomEvent?b=new CustomEvent(a):(b=document.createEvent("CustomEvent"),b.initCustomEvent(a,!1,!1,void 0)),b},d=function(a){return a.getAttribute("data-sort")||a.textContent||a.innerText||""},e=function(a,b){return a=a.toLowerCase(),b=b.toLowerCase(),a===b?0:a<b?1:-1},f=function(a,b){return function(c,d){var e=a(c.td,d.td);return 0===e?b?d.index-c.index:c.index-d.index:e}};a.extend=function(a,c,d){if("function"!=typeof c||"function"!=typeof d)throw new Error("Pattern and sort must be a function");b.push({name:a,pattern:c,sort:d})},a.prototype={init:function(a,b){var c,d,e,f,g=this;if(g.table=a,g.thead=!1,g.options=b,a.rows&&a.rows.length>0)if(a.tHead&&a.tHead.rows.length>0){for(e=0;e<a.tHead.rows.length;e++)if(a.tHead.rows[e].classList.contains("sort-row")){c=a.tHead.rows[e];break}c||(c=a.tHead.rows[a.tHead.rows.length-1]),g.thead=!0}else c=a.rows[0];if(c){var h=function(){g.current&&g.current!==this&&(g.current.classList.remove("sort-up"),g.current.classList.remove("sort-down")),g.current=this,g.sortTable(this)};for(e=0;e<c.cells.length;e++)f=c.cells[e],f.classList.contains("no-sort")||(f.setAttribute("role","columnheader"),f.classList.add("sort-header"),f.tabindex=0,f.addEventListener("click",h,!1),f.classList.contains("sort-default")&&(d=f));d&&(g.current=d,g.sortTable(d))}},sortTable:function(a,g){var h,i,j=this,k=a.cellIndex,l=e,m="",n=[],o=j.thead?0:1,p=a.getAttribute("data-sort-method"),q=a.getAttribute("aria-sort");if(j.table.dispatchEvent(c("beforeSort")),g?a.classList.contains("ascending")?(h="ascending",i="sort-up"):(h="descending",i="sort-down"):(a.classList.contains("ascending")?(h="descending",i="sort-down"):a.classList.contains("descending")?(h="ascending",i="sort-up"):"ascending"===q?(h="descending",i="sort-down"):"descending"===q?(h="ascending",i="sort-up"):j.options.descending?(h="ascending",i="sort-up"):(h="descending",i="sort-down"),a.classList.remove("sort-down"===i?"sort-up":"sort-down"),a.classList.add(i),a.setAttribute("aria-sort",h)),!(j.table.rows.length<2)){if(!p){for(;n.length<3&&o<j.table.tBodies[0].rows.length;)m=d(j.table.tBodies[0].rows[o].cells[k]),m=m.trim(),m.length>0&&n.push(m),o++;if(!n)return}for(o=0;o<b.length;o++)if(m=b[o],p){if(m.name===p){l=m.sort;break}}else if(n.every(m.pattern)){l=m.sort;break}for(j.col=k,o=0;o<j.table.tBodies.length;o++){var r,s=[],t={},u=0,v=0;if(!(j.table.tBodies[o].rows.length<2)){for(r=0;r<j.table.tBodies[o].rows.length;r++)m=j.table.tBodies[o].rows[r],m.classList.contains("no-sort")?t[u]=m:s.push({tr:m,td:d(m.cells[j.col]),index:u}),u++;for("descending"===h?(s.sort(f(l,!0)),s.reverse()):s.sort(f(l,!1)),r=0;r<u;r++)t[r]?(m=t[r],v++):m=s[r-v].tr,j.table.tBodies[o].appendChild(m)}}j.table.dispatchEvent(c("afterSort"))}},refresh:function(){void 0!==this.current&&this.sortTable(this.current,!0)}},"undefined"!=typeof module&&module.exports?module.exports=a:window.Tablesort=a}();